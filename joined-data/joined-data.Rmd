---
title: "joined-data"
output: html_document
---

## Set up
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(jsonlite)
library(httr)
library(rvest)
library(readxl)
library(tidyverse)
library(mdsr)   
library(tidyr)
library(ggplot2)
library(readr)
library(knitr)
```

## Join Census Data
```{r, message=FALSE}

data_pop <- pop_all_years
data_census <- final_census_df
data_gdp <- gdp_df
data_coord <- coord_df

data_joined_pop_census <- left_join(data_pop, data_census, by = c("Year", "GEO.id", "GEO.id2", "GEO.display-label"))

data_joined_pop_census_gdp <- left_join(data_joined_pop_census, data_gdp, by = c("GEO.id2", "Year"))

data_joined_pop_census_gdp_coord <- left_join(data_joined_pop_census_gdp, coord_df, by = c("GEO.id2", "GEO.display-label")) %>% 
  select(-c(GEO.id, GeoName))

```

```{r}
FTA_1 <- left_join(data_joined_pop_census_gdp_coord, census_UZA_MSA_key,
            by="GEO.id2")

test_df <- data_joined_pop_census_gdp_coord %>% 
  group_by(GEO.id2) %>% 
  arrange(desc(PopEstimate)) 

head(test_df, n = 500)
```
